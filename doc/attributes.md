# Attributes

Attributes are key-value annotations stored in the FASTA/FASTQ definition
line. They are added by using the `-a` option:

```bash
seqtool . -a a=b input.fa
```

produces something like:

```
>id1 a=b
SEQUENCE
>id2 a=b
SEQUENCE
(...)
```

Attributes become useful when using [variables](variables):

```bash
seqtool . -a num={num} input.fa
```
```
>id1 num=1
SEQUENCE
>id2 num=2
SEQUENCE
(...)
```

The `-a` option is available in any command that returns FASTA/FASTQ sequences,
not just in the `pass` (`.`) command. It can be used multiple times in the
same command if more than one attribute has to be added.

### Accessing attributes

Attributes are easily accessed using variables using `{a:name}`.
They can be located at any place and will be recognized if preceded by a space.
This example creates new files named after the attribute values and saves
sequences with that value there:

```bash
seqtool split -k '{a:attribute}.fa' seqs.fa
```

See individual command descriptions for more examples ([count](count), [split](split),
[trim](trim), [mask](mask)).


### Other delimiters

It is also possible to use other delimiters by specifying `--adelim`. It will be used
for both setting attributes (`-a`) and parsing them by the use of a variable (`a:name`).
This is also useful for parsing attributes set by other tools like 
[usearch](htta://drive5.com/usearch/). To replace the `=` delimiter, use
the `--aval-delim` option. Alternatively, the delimiters can be changed more permanently
by setting the `SEQTOOL_ATTR_DELIM` and `SEQTOOL_ATTRVAL_DELIM` environment variables.

This example parses size annotations in files generated by *usearch*:

```bash
# cluster at 90% identity
usearch -cluster_fast seqs.fa -id 0.97 -sizeout -centroids clusters.fa
```

*clusters.fa:*

```
>seq_1;size=343;
SEQUENCE
(...)
```

Extract cluster ids and sizes into a tab delimited txt file:

```bash
seqtool . --to-txt id,a:size --adelim ';' clusters.fa

# equivalent to:

SEQTOOL_ATTR_DELIM=';'
seqtool . --to-txt id,a:size clusters.fa
```

Output:

```
seq1	343
(...)
```

### Deleting attributes

Use the `del` command:

```bash
seqtool del --attrs attr1,attr2 seqs.fa > clean.fa
```

It is also possible to create transient attributes that are deleted when accessed
as variables by adding a `-` before the attribute name: `{a:-attribute}`.
The following command masks all occurrences of `SUBSEQ` by using a transient
property that will not be present in the final output.

```bash
seqtool find SUBSEQ -a pos={f:drange} seqs.fa | seqtool mask {a:-pos} > masked.fa
```
